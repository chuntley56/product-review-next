{"version":3,"file":"static/webpack/static/development/pages/index.js.6b6f525f65d3aaaf9c24.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport fetch from 'isomorphic-unfetch';\nimport Review from '../components/Review';\nimport RatingBox from '../components/RatingBox';\nimport Sort from '../components/Sort';\nimport Pagination from '../components/Pagination';\nimport '../static/css/style.css';\n\nconst paginate = (array, reviewsPerPage, page) => {\n  --page;\n  return array.slice(page * reviewsPerPage, (page + 1) * reviewsPerPage);\n}\n\nclass App extends Component {\n  static async getInitialProps() {\n    const response = await fetch('http://localhost:3000/static/data/data.json')\n    const reviews = await response.json()\n    return {reviews: reviews.sort((a, b) => b.date.localeCompare(a.date))}\n  }\n\n  state = {\n    reviews: this.props.reviews,\n    page: 1\n  }\n\nsort = event => {\n  const { reviews } = this.state;\n  const order = event.target.value;\n  event.preventDefault();\n  (order === 'old') ? reviews.sort((a, b) => a.date.localeCompare(b.date)) :\n  (order === 'low') ? reviews.sort((a, b) => a.rating - b.rating) :\n  (order === 'high') ? reviews.sort((a, b) => b.rating - a.rating) : reviews.sort((a, b) => b.date.localeCompare(a.date))\n  this.setState({\n    reviews: reviews,\n    page: 1\n  })\n}\n\nchangePage = event => {\n  const { page } = this.state;\n  event.preventDefault();\n  event.target.value === 'next' ?\n  this.setState({ page: page + 1 }) :\n  this.setState({ page: page - 1 })\n}\n\nrender() {\n  const { page, reviews } = this.state;\n  const totalReviews = reviews.length;\n  const reviewsPerPage = 4;\n  const indexLastReview = page * reviewsPerPage;\n  const indexFirstReview = indexLastReview - reviewsPerPage;\n  const currentReviews = paginate(reviews, reviewsPerPage, page);\n  const lastPage = Math.ceil(totalReviews / reviewsPerPage);\n  const rating = (Math.round(reviews.reduce((total, { rating }) => rating + total, 0) / reviews.length * 10) / 10) || 5;\n  const review = currentReviews.map((data, index) => {\n    return (\n      <Review data={data} key={index}/>\n    )})\n\n  return (\n    <div className=\"content\">\n    {rating &&  <RatingBox rating={rating} />}\n\n      <section className=\"toolbar\">\n        <div className=\"ui-grid-container\">\n        <div className=\"ui-grid\">\n          <div className=\"ui-grid-col\">\n            <div className=\"review-total\">\n              {page === lastPage ?\n              `${indexFirstReview + 1} of ${totalReviews} Reviews` :\n              `${indexFirstReview + 1}-${indexLastReview} of ${totalReviews} Reviews`}\n            </div>\n          </div>\n          <div className=\"ui-grid-col\">\n              <Sort sort={this.sort.bind(this)} />\n          </div>\n        </div>\n        </div>\n      </section>\n\n      <section className=\"reviews\">\n        {review}\n      </section>\n\n      <Pagination\n        page={page}\n        lastPage={lastPage}\n        changePage={this.changePage.bind(this)} />\n    </div>\n  )\n}\n}\n\nexport default App;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AAOA;AACA;AACA;AAFA;AACA;AAIA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;;;;;;;;;;;;;AA5EA;AACA;;AADA;;AACA;AACA;;AADA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AALA;AACA;AAgFA;;;;A","sourceRoot":""}